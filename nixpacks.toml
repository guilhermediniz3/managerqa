[phases.setup]
cmds = [
  # Frontend
  "cd testerqa && yarn install --frozen-lockfile",
  
  # Backend
  "cd backend && chmod +x mvnw && ./mvnw clean package -DskipTests"
]

[phases.build]
cmds = [
  "cd testerqa && yarn build",
  "cd backend && ./mvnw package -DskipTests"
]

[phases.start]
cmd = "cd backend && java -jar target/demo-0.0.1-SNAPSHOT.jar --server.port=$PORT"

[env]
PORT = "8081"
NODE_ENV = "production"
SPRING_PROFILES_ACTIVE = "prod"
DATABASE_URL = ""  # Auto-preenchido pelo PostgreSQL
DB_USERNAME = ""   # Auto-preenchido
DB_PASSWORD = ""   # Auto-preenchido
TOKEN_SECRET = "dGhpcy1lcy11bWEtY2hhdmUtc2Vnby1wYXJhLWp3dC1jb20tNjQtY2FyYWN0ZXJlcw=="